{% extends 'game/base.html' %}
{% load static %}
{% block content %}
<style>
@keyframes fadeIn {
  from { opacity: 0; transform: scale(0.8); }
  to { opacity: 1; transform: scale(1); }
}
.fade-in {
  animation: fadeIn 0.8s ease-out;
}
</style>

<div class="container mx-auto text-center mt-10">
    <h1 class="text-4xl font-bold text-pink-700 mb-6">üêæ Cat Clicker</h1>

    <!-- –í—ã–±–æ—Ä –∫–æ—Ç–∞ -->
    <div class="flex justify-center mb-4 space-x-4">
        {% for c in cats %}
        <a href="{% url 'index_with_cat' c.id %}" 
           class="px-4 py-2 rounded-lg {% if cat and c.id == cat.id %}bg-pink-500 text-white{% else %}bg-gray-200 hover:bg-pink-100{% endif %}">
           {{ c.name }}
        </a>
        {% endfor %}
    </div>

    <!-- –ï—Å–ª–∏ –∫–æ—Ç –≤—ã–±—Ä–∞–Ω -->
    {% if cat %}
   <div class="bg-white rounded-xl shadow-lg p-6 w-96 mx-auto">
    <h2 class="text-3xl font-semibold text-gray-800 mb-2">{{ cat.name }}</h2>
    <p class="text-gray-600 mb-2">–£—Ä–æ–≤–µ–Ω—å: {{ cat.level }}</p>
    <p class="text-gray-600 mb-4">–ú–æ–ª–æ–∫–æ: üçº {{ cat.milk }}</p>

    <form id="clickForm" action="{% url 'click_cat' cat.id %}" method="post">
  {% csrf_token %}
  <button type="submit" id="catButton">
    <img src="https://placekitten.com/350/350"
         class="rounded-2xl shadow-lg cursor-pointer transition-transform duration-200 hover:scale-105 active:scale-110">
  </button>
</form>

<!-- üéµ –ó–≤—É–∫ –∫–ª–∏–∫–∞ -->
<audio id="clickSound" src="{% static 'game/sounds/cat-meow-8-fx-306184.mp3' %}"></audio>


<script>
document.getElementById('catButton').addEventListener('click', function() {
    const sound = document.getElementById('clickSound');
    sound.currentTime = 0;
    sound.play();
});
</script>

{% if cat.score >= 20 and cat.score % 20 == 0 %}
  <div id="happyCat" class="mt-6 fade-in">
    <img src="https://media.giphy.com/media/MDJ9IbxxvDUQM/giphy.gif" 
         alt="happy cat" 
         class="mx-auto w-60 rounded-xl shadow-lg">
    <p class="text-pink-600 font-bold mt-2 text-xl">–£—Ä–∞! {{ cat.name }} —Å—á–∞—Å—Ç–ª–∏–≤ üòª</p>
  </div>
{% endif %}


    <p class="text-xl font-bold mt-4">–û—á–∫–∏: {{ cat.score }}</p>
</div>

    {% else %}
    <p class="text-gray-500 text-lg">–í—ã–±–µ—Ä–∏ –∫–æ—Ç–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å –∏–≥—Ä—É üò∫</p>
    {% endif %}
</div>
{% endblock %}
