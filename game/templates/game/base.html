{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Cat Clicker üêæ</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Tailwind -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="min-h-screen flex flex-col bg-cover bg-center bg-no-repeat"
      style="background-image: url('{% static 'game/images/–ø—Ä–æ—Å—Ç–æ–π.jpeg' %}');">

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
   <nav class="bg-white/30 backdrop-blur-md shadow-md sticky top-0 z-50 py-3">
        <div class="flex justify-center gap-4">
            {% if cat %}
            <a href="{% url 'index_with_cat' cat.id %}" 
               class="px-4 py-2 bg-pink-500 text-white font-bold rounded-lg shadow-lg
                      hover:bg-pink-600 transition transform duration-200 hover:scale-105"> üêæ–ì–ª–∞–≤–Ω–∞—è</a>
            {% endif %}
            <a href="{% url 'cat_list' %}" 
               class="px-4 py-2 bg-pink-500 text-white font-bold rounded-lg shadow-lg
                      hover:bg-pink-600 transition transform duration-200 hover:scale-105"> üêà–ú–æ–∏ –∫–æ—Ç—ã</a>

            <a href="{% url 'create_cat' %}" 
               class="px-4 py-2 bg-pink-500 text-white font-bold rounded-lg shadow-lg
                      hover:bg-pink-600 transition transform duration-200 hover:scale-105"> ‚ûï–î–æ–±–∞–≤–∏—Ç—å –∫–æ—Ç–∏–∫–∞</a>
        </div>
    </nav>

    <!-- –ö–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="flex-grow container my-5">
        {% block content %}
        {% endblock %}
    </main>

    <!-- –§—É—Ç–µ—Ä -->
    <footer class="bg-white/30 backdrop-blur-md text-center text-gray-600 py-3 shadow-inner">
        Made with ‚ù§Ô∏è by <span class="font-semibold text-pink-500">–ê–π–¥–∞–Ω–∞</span>
    </footer>

    <!-- –ú—É–∑—ã–∫–∞ -->
    <audio id="bgMusic" loop>
        <source src="{% static 'game/sounds/maxwell.mp3' %}" type="audio/mpeg">
        –¢–≤–æ–π –±—Ä–∞—É–∑–µ—Ä –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–∑—ã–∫—É üòø
    </audio>

    <button id="playMusicBtn"
            class="fixed bottom-5 right-5 px-4 py-2 bg-pink-500 text-white rounded-full shadow-lg z-50 hover:bg-pink-600 transition">
        üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É
    </button>

    <script>
        const music = document.getElementById('bgMusic');
        const btn = document.getElementById('playMusicBtn');
        let playing = false;

        btn.addEventListener('click', () => {
            if (!music) {
                console.error("‚ö†Ô∏è –ê—É–¥–∏–æ —ç–ª–µ–º–µ–Ω—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω!");
                return;
            }

            if (!playing) {
                music.play().then(() => {
                    btn.textContent = '‚è∏ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –º—É–∑—ã–∫—É';
                    playing = true;
                    console.log("‚úÖ –ú—É–∑—ã–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞:", music.src);
                }).catch(err => {
                    console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–∏–≥—Ä—ã–≤–∞–Ω–∏—è:", err);
                    alert("–†–∞–∑—Ä–µ—à–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –∑–≤—É–∫–∞ –≤ –±—Ä–∞—É–∑–µ—Ä–µ üò∫");
                });
            } else {
                music.pause();
                btn.textContent = 'üéµ –í–∫–ª—é—á–∏—Ç—å –º—É–∑—ã–∫—É';
                playing = false;
                console.log("‚èπ –ú—É–∑—ã–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞");
            }
        });
    </script>
</body>
</html>
